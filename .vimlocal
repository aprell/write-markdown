function! InsertDate()
    let pos = getpos(".")
    :%s/^date:.*/\=system('date "+date: %Y-%m-%d"')[:-2]/e
    call setpos(".", pos)
endfunction

autocmd BufWritePre *.md :call InsertDate()
